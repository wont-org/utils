<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开发指南 | @wont/utils 函数库</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="@wont/utils is javascript library, written with typescript. supporting browser and node">
    
    <link rel="preload" href="/assets/css/0.styles.992cb7aa.css" as="style"><link rel="preload" href="/assets/js/app.b67e461f.js" as="script"><link rel="preload" href="/assets/js/2.3ae1fb64.js" as="script"><link rel="preload" href="/assets/js/10.46933624.js" as="script"><link rel="prefetch" href="/assets/js/11.321fbe4d.js"><link rel="prefetch" href="/assets/js/12.4f9bbc57.js"><link rel="prefetch" href="/assets/js/13.29784b1e.js"><link rel="prefetch" href="/assets/js/14.c4223a90.js"><link rel="prefetch" href="/assets/js/15.abe3fe85.js"><link rel="prefetch" href="/assets/js/16.1a437a43.js"><link rel="prefetch" href="/assets/js/17.733fd531.js"><link rel="prefetch" href="/assets/js/18.8e0e0dff.js"><link rel="prefetch" href="/assets/js/19.4c0b96b7.js"><link rel="prefetch" href="/assets/js/20.1c900ffd.js"><link rel="prefetch" href="/assets/js/21.22eb3f44.js"><link rel="prefetch" href="/assets/js/22.8738ddfc.js"><link rel="prefetch" href="/assets/js/23.01c81506.js"><link rel="prefetch" href="/assets/js/24.fa480c29.js"><link rel="prefetch" href="/assets/js/25.c3b4d05a.js"><link rel="prefetch" href="/assets/js/3.79166e16.js"><link rel="prefetch" href="/assets/js/4.09fd2c39.js"><link rel="prefetch" href="/assets/js/5.fc791712.js"><link rel="prefetch" href="/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/assets/js/7.4bcf017a.js"><link rel="prefetch" href="/assets/js/8.224b3d6f.js"><link rel="prefetch" href="/assets/js/9.91a63ac5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.992cb7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">@wont/utils 函数库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/common/quickstart.html" class="nav-link">
  快速开始
</a></div><div class="nav-item"><a href="/common/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  开发指南
</a></div><div class="nav-item"><a href="/common/CHANGELOG.html" class="nav-link">
  变更历史
</a></div><div class="nav-item"><a href="/coverage/lcov-report/index.html" class="nav-link">
  测试覆盖率
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="生态系统" class="mobile-dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wont-org/cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/wont-org/utils" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/wont-org/utils" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/common/quickstart.html" class="nav-link">
  快速开始
</a></div><div class="nav-item"><a href="/common/guide.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  开发指南
</a></div><div class="nav-item"><a href="/common/CHANGELOG.html" class="nav-link">
  变更历史
</a></div><div class="nav-item"><a href="/coverage/lcov-report/index.html" class="nav-link">
  测试覆盖率
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生态系统" class="dropdown-title"><span class="title">生态系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="生态系统" class="mobile-dropdown-title"><span class="title">生态系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/wont-org/cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  脚手架
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/wont-org/utils" target="_blank" rel="noopener noreferrer" class="nav-link external">
  react组件库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/wont-org/utils" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/common/CHANGELOG.html" class="sidebar-link">变更历史</a></li><li><a href="/common/code-commenting.html" class="sidebar-link">根据注释生成文档</a></li><li><a href="/common/guide.html" aria-current="page" class="active sidebar-link">开发指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/common/guide.html#函数设计" class="sidebar-link">函数设计</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#分支策略" class="sidebar-link">分支策略</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#创建分支、函数" class="sidebar-link">创建分支、函数</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#实现函数功能" class="sidebar-link">实现函数功能</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#编写单元测试" class="sidebar-link">编写单元测试</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#运行单元测试" class="sidebar-link">运行单元测试</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#完善注释" class="sidebar-link">完善注释</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#提交代码" class="sidebar-link">提交代码</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#完成" class="sidebar-link">完成</a></li><li class="sidebar-sub-header"><a href="/common/guide.html#发版" class="sidebar-link">发版</a></li></ul></li><li><a href="/common/jest.html" class="sidebar-link">Jest 介绍</a></li><li><a href="/common/quickstart.html" class="sidebar-link">快速上手</a></li><li><a href="/common/recommend.html" class="sidebar-link">第三方库推荐</a></li><li><a href="/common/z-refer.html" class="sidebar-link">参考资料</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>函数API</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="开发指南"><a href="#开发指南" class="header-anchor">#</a> 开发指南</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>参与<code>zero-utils</code>函数库开发之前，您需要了解 <a href="https://www.tslang.cn/" target="_blank" rel="noopener noreferrer">TypeScript<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://github.com/conventional-changelog/commitlint" target="_blank" rel="noopener noreferrer">commit规范<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://jestjs.io/docs/en/getting-started" target="_blank" rel="noopener noreferrer">jest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://jsdoc.app/index.html" target="_blank" rel="noopener noreferrer">jsdoc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h2 id="函数设计"><a href="#函数设计" class="header-anchor">#</a> 函数设计</h2> <p>首先创建一个<code>issue</code>，说明函数功能，模板如下：</p> <ul><li>函数名称</li> <li>功能描述、解决痛点</li> <li>入参说明</li> <li>返回参数说明</li> <li>实现方案、系统分析</li></ul> <p>函数功能、系统分析得到认可后，开始开发。</p> <h2 id="分支策略"><a href="#分支策略" class="header-anchor">#</a> 分支策略</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>分支策略遵循<code>angular commit</code>规范，示例如下。</p></div> <ul><li>master: 受保护、稳定且经过测试的分支，也是主迭代分支。代码必须提<code>pull request</code>并且<code>code review</code>后，联系仓库<code>owner</code> <strong>liukun</strong> <a href="mailto:919590347@qq.com">919590347@qq.com</a></li> <li>feat/*: 新功能, 新函数</li> <li>fix/*: 修复函数的 bug （src/*）</li> <li>docs/*: 仅修改文档相关（docs/*）</li> <li>style/*: 代码风格层面改动, eg: 空格、分号、空行、引号……</li> <li>refactor/*: 函数重构，既不是bug也不是feature （src/*）</li> <li>perf/*: 优化性能（src/*, build/*）</li> <li>test/*: 测试用例的添加、修改、删除（src/_*.test.ts）</li> <li>build/*: 构建层面修改。 egg：build/*, rollup, gulp……</li> <li>ci/*: 自动化脚本相关。 eg: Travis, jenkins, gitlab.ci</li> <li>chore/*: 其他的修改，不包含src, test</li> <li>revert/*: 回滚之前的commit</li></ul> <h2 id="创建分支、函数"><a href="#创建分支、函数" class="header-anchor">#</a> 创建分支、函数</h2> <h3 id="创建分支"><a href="#创建分支" class="header-anchor">#</a> 创建分支</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 迭代分支</span>
<span class="token function">git</span> checkout master
<span class="token function">git</span> checkout -b feat/helloWorld
</code></pre></div><h3 id="创建模块"><a href="#创建模块" class="header-anchor">#</a> 创建模块</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>执行npm脚本，输入函数名，强制使用小驼峰（camelCase），例如: <code>helloWorld</code>;</p> <p>如该函数不开放给使用者，请以下划线开头，例如: <code>_helloWorld</code>;</p> <p>完成之后，可以看到新增了一个目录 <strong>src/helloWorld</strong>，且该目录下有两个文件：</p></div> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run create
</code></pre></div><p><strong>helloWorld.ts</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * @description 总体的描述
 * @function helloWorld
 * @returns {number} 返回值的描述
 * @param {number} a - 参数a的描述
 * @throws {TypeError} 异常的描述
 * @author  xxx &lt;xxx@xxx.com&gt;
 * @example
 * helloWorld(1)  // returns 1
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">helloWorld</span><span class="token punctuation">(</span>a<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a
<span class="token punctuation">}</span>
</code></pre></div><p><strong>_helloWorld.test.ts</strong></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> helloWorld <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./helloWorld'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'helloWorld 方法测试'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'具体测试'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="实现函数功能"><a href="#实现函数功能" class="header-anchor">#</a> 实现函数功能</h2> <p>在 <strong>helloWorld.ts</strong> 文件中实现函数的相关功能</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如有引入第三方的 <code>npm</code> 包，请在 <code>rollup.config.ts</code> 的 <code>external</code>中添加配置。注意，在<code>umd</code>与<code>iife</code>中还需要添加<code>globals</code></p></div> <h2 id="编写单元测试"><a href="#编写单元测试" class="header-anchor">#</a> 编写单元测试</h2> <p>在 <strong>_helloWorld.test.ts</strong> 文件中编写单元测试</p> <p>函数库使用 <strong><a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">Jest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong> 作为单元测试框架，可参考 <a href="/common/jest/">Jest 介绍</a></p> <h2 id="运行单元测试"><a href="#运行单元测试" class="header-anchor">#</a> 运行单元测试</h2> <p>运行以下命令进行测试</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run <span class="token builtin class-name">test</span>
</code></pre></div><p>该命令会运行：单元测试、<code>eslint</code>，并且在控制台输出测试结果，生成单元测试覆盖率报告；</p> <p>如果发生错误，请改正后再重新测试。此外，也可以使用 <code>watch</code> 模式，在该模式下，如果文件内容发生改变，会自动触发测试；</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run <span class="token function">watch</span>
</code></pre></div><p><code>watch</code> 模式默认运行所有的单元测试，也可以根据需求自定义</p> <ul><li>输入 <code>p</code> 只运行文件名符合匹配规则的单元测试</li> <li>输入 <code>t</code> 只运行<code>test name</code>符合匹配规则的单元测试</li> <li>输入 <code>f</code> 只运行测试失败的单元测试</li> <li>输入 <code>o</code> 只运行文件发生改动的单元测试</li></ul> <p>此外，<code>watch</code> 模式还支持其他功能</p> <ul><li>输入 <code>F</code> 修复 EsLint</li> <li>输入 <code>回车键</code> 触发运行一次单元测试</li> <li>输入 <code>q</code> 退出 <code>watch</code> 模式</li></ul> <h2 id="完善注释"><a href="#完善注释" class="header-anchor">#</a> 完善注释</h2> <p>在 <strong>helloWorld.ts</strong> 文件中完善注释，用于自动生成文档；我们使用 jsdoc 的规范来写注释，然后利用 jsdoc-to-markdown 把注释生成 markdown 文档</p> <p>默认的注释如下，改成正确的内容即可，<a href="/common/code-commenting/">如何写注释</a></p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/**
 * @description 总体的描述
 * @function helloWorld
 * @returns {number} 返回值的描述
 * @param {number} a - 参数a的描述
 * @throws {TypeError} 异常的描述
 * @author  xxx &lt;xxx@xxx.com&gt;
 * @example
 * helloWorld(1)  // returns 1
 */</span>
</code></pre></div><p>运行 npm 命令来查看文档：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run changelog <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> run build:docs
</code></pre></div><h2 id="提交代码"><a href="#提交代码" class="header-anchor">#</a> 提交代码</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>commit 规范: 采用 angular 风格, 借助 commitizen 进行交互式提交、commitlint 进行消息格式的校验；</p></div> <h3 id="commitizen命令行交互"><a href="#commitizen命令行交互" class="header-anchor">#</a> commitizen命令行交互</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># global</span>
<span class="token function">npm</span> i conventional-changelog-cli -g
<span class="token function">git</span> cz
<span class="token comment"># npm</span>
<span class="token function">npm</span> i conventional-changelog-cli -D
npx git-cz
</code></pre></div><h3 id="commitlint校验"><a href="#commitlint校验" class="header-anchor">#</a> commitlint校验</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>commit 格式如下(第一行必填, 其他行选填), 其中 type 代表的是修改内容的类型(必须使用指定的值)、scope 代表影响范围(根据项目自定义)、</p></div> <div class="language- extra-class"><pre class="language-text"><code>type(scope): 简单描述

- 详细描述一
- 详情描述二

BREAKING CHANGE: 类似 angular-v2 的断层式升级 #1 (只有 type=feat、fix 时才包含)

fix #1, fix #2
</code></pre></div><h4 id="type-取值列表"><a href="#type-取值列表" class="header-anchor">#</a> type 取值列表</h4> <blockquote><p>分支策略完全相同</p></blockquote> <ul><li>feat: 新功能, 新函数</li> <li>fix: 修复函数的 bug （src/*）</li> <li>docs: 仅修改文档相关（docs/*）</li> <li>style: 代码风格层面改动, eg: 空格、分号、空行、引号……</li> <li>refactor: 函数重构，既不是bug也不是feature （src/*）</li> <li>perf: 优化性能（src/*, build/*）</li> <li>test: 测试用例的添加、修改、删除（src/_*.test.ts）</li> <li>build: 构建层面修改。 egg：build/*, rollup, gulp……</li> <li>ci: 自动化脚本相关。 eg: Travis, jenkins, gitlab.ci</li> <li>chore: 其他的修改，不包含src, test</li> <li>revert: 回滚之前的commit</li></ul> <h4 id="scope-建议"><a href="#scope-建议" class="header-anchor">#</a> scope 建议</h4> <ul><li>修改的函数名</li> <li>待补充</li></ul> <br> <p>在 <code>git commit</code> 提交成功后，请推到远程仓库，并发起 <strong>MR</strong>。</p> <p>一般情况下，一个分支只允许有 <strong>一个 commit</strong>，除非有多个不相关的内容时，才允许有多个。</p> <p>在创建 <strong>MR</strong> 的时候，有一个<strong>Squash commits</strong>选项：</p> <p><img src="https://media.winbaoxian.com/autoUpload/common/WechatIMG264_6b50cebfcaa8deb.png" alt="img" title=":size=600"></p> <p><span style="color:red;">请不要勾选该选项；</span></p> <p>因为我们使用了 <code>commitizen</code> 来对 <strong>commit message</strong> 做了严格的校验；如果勾选<strong>Squash commits</strong>，
那么当 <strong>MR</strong> 中有多个 <strong>commit</strong> 时，最终合并成的 <strong>commit message</strong> 会默认使用 <strong>MR</strong> 的 <code>title</code>，
从而导致 <strong>commit message</strong> 发生改变，变得不符合 <code>commitizen</code> 的要求。</p> <p>因此，如果需要合并多个<strong>commit</strong>，可以使用 <code>git rebase</code> 来进行合并，合并完成后再 push 到远程相关分支。</p> <p><strong>MR</strong>创建完成后，审核人员会对代码进行审核，如果有需要修改、优化的地方，需要开发人员进行处理；</p> <h2 id="完成"><a href="#完成" class="header-anchor">#</a> 完成</h2> <p>审核人员审核通过后，会处理<strong>PR</strong>，合并成功后，整个开发流程就此结束。</p> <h2 id="发版"><a href="#发版" class="header-anchor">#</a> 发版</h2> <p>通过npm scripts, 执行自动化版本变更，然后申请pr，pr通过后，切换到master，执行<code>npm run pushtag</code>推送tag至远程，travis会自动化发版，发版成功后会收到邮件</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> run alpha <span class="token comment"># 内部测试版,一般不向外部发布,会有很多Bug.一般只有测试人员使用</span>
<span class="token function">npm</span> run beta <span class="token comment"># 公测版，消除了严重bug，这个阶段的版本会一直加入新的功能。在Alpha版之后推出</span>
<span class="token function">npm</span> run rc <span class="token comment"># 系统平台上就是发行候选版本。RC版不会再加入新的功能了，主要着重于除错。</span>
<span class="token function">npm</span> run patch <span class="token comment"># 补丁，当做了向下兼容的问题修正</span>
<span class="token function">npm</span> run minor <span class="token comment"># 新增功能，当做了向下兼容的功能性新增</span>
<span class="token function">npm</span> run major <span class="token comment"># 断层更新，当做了不兼容的 API 修改</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">12/14/2020, 3:00:59 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/common/code-commenting.html" class="prev">
        根据注释生成文档
      </a></span> <span class="next"><a href="/common/jest.html">
        Jest 介绍
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b67e461f.js" defer></script><script src="/assets/js/2.3ae1fb64.js" defer></script><script src="/assets/js/10.46933624.js" defer></script>
  </body>
</html>
